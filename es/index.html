<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Black Image | Generador Gratis de Pantalla Negra Pura</title>
  <link rel="icon" type="image/x-icon" href="../pic/logo.ico" />
  <link rel="shortcut icon" type="image/x-icon" href="../pic/logo.ico" />
  <link rel="apple-touch-icon" href="../pic/logo.png" />
  <meta name="description" content="Black Image - ¡100% Gratis Para Siempre! Descarga fondos de imagen negra pura al instante, sin necesidad de registro. El generador de Black Image admite todos los tamaños: 480p, 720p, 1080p, 2K, 4K, 8K y dimensiones personalizadas. ¡Obtén tus archivos PNG de Black Image ahora!" />
  <meta name="keywords" content="Black Image, descargar imagen negra, fondo negro puro, generador de fondo negro, png negro 4k, imagen negra 1080p, pantalla negra gratis, fondo negro para video" />
  <link rel="canonical" href="https://blackimage.online/es/es/" />
  <meta property="og:title" content="Black Image | Generador Gratis de Pantalla Negra Pura" />
  <meta property="og:description" content="Black Image - ¡100% Gratis Para Siempre! Descarga fondos de imagen negra pura al instante, sin necesidad de registro. El generador de Black Image admite todos los tamaños: 480p, 720p, 1080p, 2K, 4K, 8K y dimensiones personalizadas." />
  <meta property="og:url" content="https://blackimage.online/es/es/" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
  <!-- 公共组件样式 -->
  <link rel="stylesheet" href="../css/common.css" />
  <style>
    :root {
      color-scheme: light;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --max-width: 1200px;
      --accent: #3456ff;
      --bg: #f6f7fb;
      --card: #ffffff;
      --text: #111827;
      --subtext: #4b5563;
      --border: #e5e7eb;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }

    /* 公共组件样式已移至 css/common.css */

    main {
      padding: 48px 24px 80px;
      max-width: var(--max-width);
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 64px;
    }

    section {
      background: var(--card);
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 25px 60px rgba(15, 23, 42, 0.08);
    }

    h1, h2, h3 {
      margin-top: 0;
      line-height: 1.3;
    }

    p {
      margin-top: 8px;
      color: var(--subtext);
    }

    .hero-lede {
      margin-bottom: 32px;
      line-height: 1.6;
      min-height: 3.2em;
    }

    .preview-panel {
      display: grid;
      grid-template-columns: minmax(0, 720px) minmax(220px, 1fr);
      gap: 32px;
      align-items: start;
      justify-content: center;
    }

    .preview-stack {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 24px;
    }

    .preview-box {
      width: 100%;
      max-width: 720px;
      aspect-ratio: 16/9;
      border-radius: 12px;
      background-image: linear-gradient(45deg, #dfe3eb 25%, transparent 25%),
        linear-gradient(-45deg, #dfe3eb 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, #dfe3eb 75%),
        linear-gradient(-45deg, transparent 75%, #dfe3eb 75%);
      background-size: 40px 40px;
      background-position: 0 0, 0 20px, 20px -20px, -20px 0;
      position: relative;
      overflow: hidden;
      border: 1px solid var(--border);
    }

    .preview-black {
      position: absolute;
      inset: 0;
      margin: auto;
      background: #000;
      border-radius: 6px;
      transition: transform 0.25s ease, width 0.25s ease, height 0.25s ease;
    }

    .controls form {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .color-section {
      margin-bottom: 8px;
    }

    .section-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 12px;
    }

    .color-options {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .color-row {
      display: flex;
      gap: 6px;
      flex-wrap: nowrap;
    }

    .color-swatch {
      flex: 1;
      min-width: 0;
      aspect-ratio: 1;
      border: 2px solid var(--border);
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      position: relative;
      padding: 0;
      background: #fff;
    }

    .color-swatch span {
      font-size: 10px;
      font-weight: 500;
      color: #fff;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      pointer-events: none;
    }

    .color-swatch[data-color="#FFFFFF"] span,
    .color-swatch[data-color="#FFFF00"] span {
      color: #000;
      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
    }

    .color-swatch:hover {
      transform: scale(1.05);
      border-color: var(--accent);
      box-shadow: 0 2px 8px rgba(52, 86, 255, 0.2);
    }

    .color-swatch.selected {
      border-color: var(--accent);
      border-width: 3px;
      box-shadow: 0 0 0 2px rgba(52, 86, 255, 0.2);
    }

    .color-other {
      background: linear-gradient(45deg, #f0f0f0 25%, transparent 25%),
                  linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),
                  linear-gradient(45deg, transparent 75%, #f0f0f0 75%),
                  linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);
      background-size: 8px 8px;
      background-position: 0 0, 0 4px, 4px -4px, -4px 0;
    }

    .color-other span {
      color: var(--text);
      text-shadow: none;
    }

    /* 颜色选择弹窗 */
    .color-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .color-modal.active {
      display: flex;
    }

    .color-modal-content {
      background: #fff;
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 25px 60px rgba(15, 23, 42, 0.3);
    }

    .color-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .color-modal-header h3 {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
    }

    .color-modal-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--subtext);
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background 0.2s ease;
    }

    .color-modal-close:hover {
      background: #f3f4f6;
    }

    .color-picker-container {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .color-picker-input {
      width: 100%;
      height: 60px;
      border: 2px solid var(--border);
      border-radius: 8px;
      cursor: pointer;
      padding: 0;
      margin: 0;
    }

    .color-input-group {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .color-input-group label {
      font-size: 14px;
      font-weight: 500;
      min-width: 80px;
    }

    .color-input-group input {
      flex: 1;
      padding: 10px 12px;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-size: 14px;
      font-family: monospace;
    }

    .color-modal-actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    .color-modal-btn {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .color-modal-btn-primary {
      background: var(--accent);
      color: #fff;
    }

    .color-modal-btn-primary:hover {
      background: #2545d6;
    }

    .color-modal-btn-secondary {
      background: #f3f4f6;
      color: var(--text);
    }

    .color-modal-btn-secondary:hover {
      background: #e5e7eb;
    }

    .resolution-section {
      margin-bottom: 8px;
    }

    .resolution-options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .resolution-options label {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 12px;
      border: 2px solid var(--border);
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      background: #fff;
      color: var(--text);
      transition: all 0.2s ease;
      user-select: none;
      position: relative;
    }

    .resolution-options label:hover {
      border-color: var(--accent);
      background: #f0f4ff;
    }

    .resolution-options input[type="radio"] {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    .resolution-options input:checked + span {
      color: #fff;
    }

    .resolution-options label:has(input:checked),
    .resolution-options label.selected {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
      font-weight: 600;
    }

    .custom-inputs {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
      transition: opacity 0.2s ease;
    }

    .custom-inputs.disabled {
      opacity: 0.5;
    }

    .custom-inputs label {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 14px;
    }

    .custom-inputs input {
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid var(--border);
      font-size: 16px;
      background: #fff;
    }

    .custom-inputs input[readonly] {
      background: #f3f4f6;
      color: var(--subtext);
      cursor: not-allowed;
    }

    .meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin-top: 12px;
      color: var(--subtext);
      font-size: 14px;
    }

    .download-btn {
      min-width: 260px;
      padding: 14px;
      border: none;
      border-radius: 999px;
      background: var(--accent);
      color: white;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .download-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 15px 25px rgba(52, 86, 255, 0.35);
    }

    .usecase-stack {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .usecase-block {
      padding: 24px;
      border: 1px solid var(--border);
      border-radius: 16px;
      background: #fff;
    }

    .usecase-block h3 {
      margin-bottom: 8px;
    }

    .usecase-block p {
      margin-bottom: 12px;
    }

    .usecase-block ul {
      margin: 0;
      padding-left: 20px;
      color: var(--subtext);
    }

    .usecase-block li + li {
      margin-top: 6px;
    }

    .faq-item + .faq-item {
      margin-top: 16px;
    }

    details {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px 20px;
      background: #fff;
    }

    summary {
      font-weight: 600;
      cursor: pointer;
      outline: none;
    }

    /* 公共组件样式已移至 css/common.css */

    @media (max-width: 1024px) {
      .preview-panel {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      section {
        padding: 28px;
      }

      .preview-panel {
        grid-template-columns: 1fr;
      }

      .nav {
        flex-direction: column;
        gap: 8px;
      }
    }
  </style>
</head>
<body>
  <!-- 导航栏占位符，将由 components.js 动态生成 -->
  <div id="header-placeholder"></div>
  <main>
    <section id="generator">
      <h1 data-i18n="hero.title">Descargar Black Image</h1>
      <p class="hero-lede" data-i18n="hero.subtitle">
        Elige la resolución que necesitas, previsualiza al instante y descarga un fondo negro de calidad profesional con un solo clic.
      </p>
      <div class="preview-panel">
        <div class="preview-stack">
          <div class="preview-box" aria-live="polite">
            <div class="preview-black" id="previewNegro"></div>
          </div>
          <button type="button" class="download-btn" id="downloadBtn" data-i18n="hero.download">
            Descargar Imagen
          </button>
        </div>
        <div class="controls">
          <form id="resolutionForm">
            <div class="color-section">
              <label class="section-label">Color</label>
              <div class="color-options">
                <div class="color-row">
                  <button type="button" class="color-swatch" data-color="#000000" style="background-color: #000000;" title="Negro">
                    <span>Negro</span>
                  </button>
                  <button type="button" class="color-swatch" data-color="#FFFFFF" style="background-color: #FFFFFF; border: 1px solid #e5e7eb;" title="Blanco">
                    <span>Blanco</span>
                  </button>
                  <button type="button" class="color-swatch" data-color="#FF0000" style="background-color: #FF0000;" title="Rojo">
                    <span>Rojo</span>
                  </button>
                  <button type="button" class="color-swatch" data-color="#00FF00" style="background-color: #00FF00;" title="Verde">
                    <span>Verde</span>
                  </button>
                  <button type="button" class="color-swatch" data-color="#FFA500" style="background-color: #FFA500;" title="Naranja">
                    <span>Naranja</span>
                  </button>
                </div>
                <div class="color-row">
                  <button type="button" class="color-swatch" data-color="#0000FF" style="background-color: #0000FF;" title="Azul">
                    <span>Azul</span>
                  </button>
                  <button type="button" class="color-swatch" data-color="#FFFF00" style="background-color: #FFFF00;" title="Amarillo">
                    <span>Amarillo</span>
                  </button>
                  <button type="button" class="color-swatch" data-color="#FFC0CB" style="background-color: #FFC0CB;" title="Rosa">
                    <span>Rosa</span>
                  </button>
                  <button type="button" class="color-swatch" data-color="#800080" style="background-color: #800080;" title="Morado">
                    <span>Morado</span>
                  </button>
                  <button type="button" class="color-swatch color-other" data-color="other" title="Otro">
                    <span>Otro</span>
                  </button>
                </div>
              </div>
            </div>
            <div class="resolution-section">
              <label class="section-label">Resolución</label>
              <div class="resolution-options" role="radiogroup" aria-label="Available resolutions">
              <label>
                <input type="radio" name="resolution" value="640x480" />
                <span>480p</span>
              </label>
              <label>
                <input type="radio" name="resolution" value="1280x720" />
                <span>720p</span>
              </label>
              <label>
                <input type="radio" name="resolution" value="1920x1080" checked />
                <span>1080p</span>
              </label>
              <label>
                <input type="radio" name="resolution" value="2560x1440" />
                <span>2K</span>
              </label>
              <label>
                <input type="radio" name="resolution" value="4096x2160" />
                <span>4K</span>
              </label>
              <label>
                <input type="radio" name="resolution" value="7680x4320" />
                <span>8K</span>
              </label>
              <label>
                <input type="radio" name="resolution" value="custom" id="customRadio" />
                <span>Custom</span>
              </label>
              </div>
            </div>
            <div class="custom-inputs" id="customInputs">
              <label>
                <span>Ancho (px)</span>
                <input type="number" id="customWidth" min="16" max="12000" placeholder="e.g. 3000" />
              </label>
              <label>
                <span>Alto (px)</span>
                <input type="number" id="customHeight" min="16" max="12000" placeholder="e.g. 2000" />
              </label>
            </div>
            <div class="meta-row">
              <span id="ratioLabel">Relación de aspecto: 16:9</span>
            </div>
          </form>
        </div>
      </div>
    </section>

    <section id="use-cases">
      <h2 data-i18n="usecases.title">Por qué los creadores mantienen una imagen negra a mano</h2>
      <p data-i18n="usecases.subtitle">Un recurso de Black Image puro ayuda a los equipos a avanzar más rápido: ofrece contraste instantáneo, transiciones pulidas y marcadores de posición confiables para cualquier flujo de trabajo.</p>
      <div class="usecase-stack">
        <article class="usecase-block" data-i18n="usecases.card1">
          <h3>Editores de video y estudios de animación</h3>
          <p>Coloca una placa negra entre clips, crea desvanecimientos cinematográficos o exporta fotogramas silenciosos para requisitos de intro/outro específicos de la plataforma.</p>
          <ul>
            <li>Oculta cortes de salto o resincroniza la voz en off sin reconstruir la edición.</li>
            <li>Usa negro puro en las líneas de tiempo de Premiere, Final Cut, CapCut o Resolve para probar subtítulos y gráficos inferiores.</li>
            <li>Exporta placas UHD o 8K para paredes LED y volúmenes de producción virtual.</li>
          </ul>
        </article>
        <article class="usecase-block" data-i18n="usecases.card2">
          <h3>Diseñadores, equipos de producto y desarrolladores</h3>
          <p>Black Image funciona como un fondo neutro para maquetas, pantallas de inicio, pruebas de quemado OLED y sesiones de control de calidad en modo oscuro.</p>
          <ul>
            <li>Verifica el contraste de iconos y la legibilidad de la tipografía en Figma, Sketch o XD.</li>
            <li>Carga marcadores de posición negros en aplicaciones móviles mientras el arte real está en producción.</li>
            <li>Automatiza scripts de calibración de dispositivos con descargas PNG programáticas.</li>
          </ul>
        </article>
        <article class="usecase-block" data-i18n="usecases.card3">
          <h3>Fotógrafos, cineastas y equipos de iluminación</h3>
          <p>Lleva un fondo negro digital para evaluar la exposición, aislar reflejos o preparar elementos de pintura mate para composición.</p>
          <ul>
            <li>Usa tabletas que muestran una pantalla negra para bloquear la luz dispersa en el set.</li>
            <li>Imprime tarjetas de referencia de alto contraste para sesiones de productos y fotografía de joyería.</li>
            <li>Alimenta PNGs negros en medidores de luz o flujos de trabajo de calibración LUT.</li>
          </ul>
        </article>
        <article class="usecase-block" data-i18n="usecases.card4">
          <h3>Productores en vivo, educadores y oradores</h3>
          <p>Mantén la atención alta cortando a negro entre diapositivas, ocultando spoilers o pausando una transmisión en vivo sin un escritorio desordenado.</p>
          <ul>
            <li>Las escenas de OBS / Streamlabs pueden cambiar a una diapositiva completamente negra con un clic.</li>
            <li>Los entrenadores pausan presentaciones para reiniciar la sala o crear suspenso.</li>
            <li>Iglesias, conferencias y transmisiones de esports dependen de intersticiales negros para transiciones limpias.</li>
          </ul>
        </article>
        <article class="usecase-block" data-i18n="usecases.card5">
          <h3>Equipos de accesibilidad, control de calidad y marketing</h3>
          <p>Black Image files help audit contrast, run brand-safe experiments, and fill CMS slots when creative is still in review.</p>
          <ul>
            <li>Prueba superposiciones compatibles con WCAG en una superficie oscura neutra.</li>
            <li>Publica páginas de destino SEO con marcadores de posición negros hasta que lleguen los recursos finales.</li>
            <li>Simulate “screen off” states for hardware demos or retail signage.</li>
          </ul>
        </article>
      </div>
    </section>

    <section id="faq">
      <h2 data-i18n="faq.title">Preguntas Frecuentes</h2>
      <div class="faq-list">
        <details class="faq-item" open>
          <summary data-i18n="faq.q1">¿La descarga es realmente gratis?</summary>
          <p data-i18n="faq.a1">Sí. Todos los archivos de imagen negra se generan localmente en tu navegador. No hay créditos, cuentas ni costos ocultos.</p>
        </details>
        <details class="faq-item">
          <summary data-i18n="faq.q2">¿Qué formato de archivo obtengo?</summary>
          <p data-i18n="faq.a2">Las descargas son archivos PNG estándar para calidad sin pérdidas. Puedes convertirlos a JPG o WebP usando cualquier editor si es necesario.</p>
        </details>
        <details class="faq-item">
          <summary data-i18n="faq.q3">¿Qué tan preciso es el color?</summary>
          <p data-i18n="faq.a3">Generamos un relleno puro #000000 sin compresión, por lo que el resultado es negro verdadero. La calibración de tu pantalla puede influir en lo que ves, pero el archivo permanece negro puro.</p>
        </details>
        <details class="faq-item">
          <summary data-i18n="faq.q4">¿Puedo automatizar las descargas?</summary>
          <p data-i18n="faq.a4">El acceso futuro a la API está en la hoja de ruta. Por ahora puedes crear scripts de descarga llamando al generador desde navegadores sin cabeza o usar el código de código abierto.</p>
        </details>
      </div>
    </section>
  </main>
  <!-- 页脚占位符，将由 components.js 动态生成 -->
  <div id="footer-placeholder"></div>

  <script>
    const previewBoxWidth = 720;
    const previewBoxHeight = 405;
    const preview = document.getElementById('previewNegro');
    const form = document.getElementById('resolutionForm');
    const ratioLabel = document.getElementById('ratioLabel');
    const customInputs = document.getElementById('customInputs');
    const customWidth = document.getElementById('customWidth');
    const customHeight = document.getElementById('customHeight');
    const downloadBtn = document.getElementById('downloadBtn');
    // yearSpan 现在由 components.js 处理

    const formatter = new Intl.NumberFormat('en-US');
    const customInputsWrapper = customInputs;

    function parseResolución(value) {
      if (value === 'custom') {
        const width = Number(customWidth.value);
        const height = Number(customHeight.value);
        return width > 0 && height > 0 ? { width, height } : null;
      }
      const [width, height] = value.split('x').map(Number);
      return { width, height };
    }

    function updatePreview() {
      const selected = form.resolution.value;
      const size = parseResolución(selected);

      if (!size) {
        preview.style.width = '0px';
        preview.style.height = '0px';
        ratioLabel.textContent = 'Relación de aspecto: —';
        downloadBtn.disabled = true;
        downloadBtn.style.opacity = 0.6;
        return;
      }

      downloadBtn.disabled = false;
      downloadBtn.style.opacity = 1;

      const { width, height } = size;
      const ratio = (width / height).toFixed(3);
      const gcd = (a, b) => (b === 0 ? a : gcd(b, a % b));
      const divisor = gcd(width, height);
      const normalized = `${Math.round(width / divisor)}:${Math.round(height / divisor)}`;
      ratioLabel.textContent = `Relación de aspecto: ${normalized} (${ratio})`;

      const boxRatio = previewBoxWidth / previewBoxHeight;
      const targetRatio = width / height;

      let displayWidth = previewBoxWidth;
      let displayHeight = previewBoxHeight;

      if (targetRatio > boxRatio) {
        displayWidth = previewBoxWidth;
        displayHeight = previewBoxWidth / targetRatio;
      } else {
        displayHeight = previewBoxHeight;
        displayWidth = previewBoxHeight * targetRatio;
      }

      preview.style.width = `${displayWidth}px`;
      preview.style.height = `${displayHeight}px`;
    }

    function toggleInputsState(isCustom) {
      customInputsWrapper.classList.toggle('disabled', !isCustom);
      customWidth.readOnly = !isCustom;
      customHeight.readOnly = !isCustom;
    }

    // 更新按钮选中状态
    function updateButtonStates() {
      const labels = document.querySelectorAll('.resolution-options label');
      labels.forEach(label => {
        const radio = label.querySelector('input[type="radio"]');
        if (radio && radio.checked) {
          label.classList.add('selected');
        } else {
          label.classList.remove('selected');
        }
      });
    }

    form.addEventListener('change', (event) => {
      const value = form.resolution.value;
      const isCustom = value === 'custom';
      toggleInputsState(isCustom);
      if (!isCustom) {
        const size = parseResolución(value);
        if (size) {
          customWidth.value = size.width;
          customHeight.value = size.height;
        }
      }
      updateButtonStates();
      updatePreview();
    });

    customWidth.addEventListener('input', updatePreview);
    customHeight.addEventListener('input', updatePreview);

    downloadBtn.addEventListener('click', async () => {
      const size = parseResolución(form.resolution.value);
      if (!size) return;
      const { width, height } = size;
      const canvas = document.createElement('canvas');
      canvas.width = width;
      canvas.height = height;
      const ctx = canvas.getContext('2d');
      ctx.fillStyle = window.selectedColor || '#000000';
      ctx.fillRect(0, 0, width, height);
      const link = document.createElement('a');
      link.download = `image-${width}x${height}.png`;
      link.href = canvas.toDataURL('image/png');
      link.click();
    });

    function initializeDefaults() {
      toggleInputsState(false);
      customWidth.value = 1920;
      customHeight.value = 1080;
    }

    initializeDefaults();
    updateButtonStates();
    updatePreview();
  </script>

  <!-- 颜色选择弹窗 -->
  <div class="color-modal" id="colorModal">
    <div class="color-modal-content">
      <div class="color-modal-header">
        <h3>Elegir Color Personalizado</h3>
        <button type="button" class="color-modal-close" id="colorModalClose">&times;</button>
      </div>
      <div class="color-picker-container">
        <input type="color" class="color-picker-input" id="colorPicker" value="#000000" />
        <div class="color-input-group">
          <label>Color Hex:</label>
          <input type="text" id="colorHexInput" value="#000000" placeholder="#000000" maxlength="7" />
        </div>
      </div>
      <div class="color-modal-actions">
        <button type="button" class="color-modal-btn color-modal-btn-secondary" id="colorModalCancelar">Cancelar</button>
        <button type="button" class="color-modal-btn color-modal-btn-primary" id="colorModalConfirmar">Confirmar</button>
      </div>
    </div>
  </div>

  <script>
    // 颜色选择功能 - 全局变量
    window.selectedColor = '#000000';
    const colorSwatches = document.querySelectorAll('.color-swatch');
    const previewNegro = document.getElementById('previewNegro');
    const colorModal = document.getElementById('colorModal');
    const colorModalClose = document.getElementById('colorModalClose');
    const colorModalCancelar = document.getElementById('colorModalCancelar');
    const colorModalConfirmar = document.getElementById('colorModalConfirmar');
    const colorPicker = document.getElementById('colorPicker');
    const colorHexInput = document.getElementById('colorHexInput');

    // 初始化：选中黑色
    document.querySelector('.color-swatch[data-color="#000000"]').classList.add('selected');
    updatePreviewColor(); // 初始化预览颜色

    // 颜色到页面的映射
    const colorPageMap = {
      '#000000': 'index.html',
      '#FFFFFF': 'white-image.html',
      '#FF0000': 'red-image.html',
      '#00FF00': 'green-image.html',
      '#FFA500': 'orange-image.html',
      '#0000FF': 'blue-image.html',
      '#FFFF00': 'yellow-image.html',
      '#FFC0CB': 'pink-image.html',
      '#800080': 'purple-image.html'
    };

    // 颜色选择器点击事件
    colorSwatches.forEach(swatch => {
      swatch.addEventListener('click', function() {
        const color = this.getAttribute('data-color');
        
        if (color === 'other') {
          // 打开颜色选择弹窗
          colorModal.classList.add('active');
          colorPicker.value = window.selectedColor;
          colorHexInput.value = window.selectedColor;
        } else if (colorPageMap[color] && colorPageMap[color] !== 'index.html') {
          // 跳转到对应颜色页面
          window.location.href = colorPageMap[color];
        } else if (color === '#000000') {
          // 当前页面的颜色，只更新预览
          window.selectedColor = color;
          updateColorSelection(this);
          updatePreviewColor();
        }
      });
    });

    // 更新颜色选择状态
    function updateColorSelection(selectedSwatch) {
      colorSwatches.forEach(swatch => {
        swatch.classList.remove('selected');
      });
      selectedSwatch.classList.add('selected');
    }

    // 更新预览区域颜色
    function updatePreviewColor() {
      previewNegro.style.backgroundColor = window.selectedColor;
    }

    // 颜色选择器同步
    colorPicker.addEventListener('input', function() {
      colorHexInput.value = this.value.toUpperCase();
    });

    // Hex输入同步
    colorHexInput.addEventListener('input', function() {
      let value = this.value.toUpperCase();
      // 确保以#开头
      if (!value.startsWith('#')) {
        value = '#' + value;
      }
      // 验证hex颜色格式
      if (/^#[0-9A-F]{6}$/i.test(value)) {
        colorPicker.value = value;
        this.value = value;
      } else {
        this.value = value;
      }
    });

    // 关闭弹窗
    function closeColorModal() {
      colorModal.classList.remove('active');
    }

    colorModalClose.addEventListener('click', closeColorModal);
    colorModalCancelar.addEventListener('click', closeColorModal);

    // 点击弹窗外部关闭
    colorModal.addEventListener('click', function(e) {
      if (e.target === colorModal) {
        closeColorModal();
      }
    });

    // 确认选择自定义颜色
    colorModalConfirmar.addEventListener('click', function() {
      const customColor = colorPicker.value.toUpperCase();
      window.selectedColor = customColor;
      
      // 更新Otro按钮显示自定义颜色
      const otherSwatch = document.querySelector('.color-other');
      otherSwatch.style.backgroundColor = customColor;
      otherSwatch.style.backgroundImage = 'none';
      otherSwatch.querySelector('span').style.color = getContrastColor(customColor);
      otherSwatch.querySelector('span').style.textShadow = 'none';
      
      updateColorSelection(otherSwatch);
      updatePreviewColor();
      closeColorModal();
    });

    // 获取对比色（用于文字颜色）
    function getContrastColor(hex) {
      const r = parseInt(hex.slice(1, 3), 16);
      const g = parseInt(hex.slice(3, 5), 16);
      const b = parseInt(hex.slice(5, 7), 16);
      const brightness = (r * 299 + g * 587 + b * 114) / 1000;
      return brightness > 128 ? '#000' : '#fff';
    }

  </script>
  
  <!-- 公共组件系统 -->
  <script src="../js/config.js"></script>
  <script src="../js/components.js"></script>
  <script>
    // 初始化公共组件（页面加载完成后）
    document.addEventListener('DOMContentLoaded', function() {
      initComponents({
        currentPage: '', // 当前页面不在导航中
        renderHeader: true,
        renderFooter: true
      });
    });
  </script>
  
  <script>
    window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
  </script>
  <script defer src="/_vercel/insights/script.js"></script>
</body>
</html>
